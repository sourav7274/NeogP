<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
      #save 
       {
            display: none;   
       }
       #success
       {
            display: none;
            color: green;   
       }
    </style>
</head>
<body class="mx-5 mt-4">
    <h1>Add Movie</h1>
    <form id="details">
        <label for="titleI">Title</label><br>
        <input type="text" name="" id="titleI"><br><br>
        <label for="yearI">Release Year</label><br>
        <input type="number" name="" id="yearI"><br><br>
        <label for="">Genre</label><br>
        <select id="genreI">
            <option value="Action">Action</option>
            <option value="Drama">Drama</option>
            <option value="Comedy">Comedy</option>
        </select><br><br>
        <label for="directorI">Director</label><br>
        <input type="text" name="" id="directorI"><br><br>
        <label for="actorI">Actor</label><br>
        <input type="text" name="" id="actorI"><br><br>
        <label for="langI">Language</label><br>
        <input type="text" name="" id="langI"><br><br>
        <label for="">Country</label><br>
        <select name="" id="countryI"><br>
            <option value="India">India</option>
            <option value="USSR">USSR</option>
            <option value="USA">USA</option>
        </select><br><br>
        <label for="ratingI">Rating</label><br>
        <input type="number" name="" id="ratingI"><br><br>
        <label for="plotI">Plot</label><br>
        <textarea name="" id="plotI" cols="30" rows="3"></textarea><br><br>
        <label for="awardsI">Awards</label><br>
        <input type="text" name="" id="awardsI"><br><br>
        <label for="pUrlI">Poster URL</label><br>
        <input type="text" name="" id="pUrlI"><br><br>
        <label for="TurlI">Trailer URL</label><br>
        <input type="text" name="" id="TurlI"><br><br>
        <button class="btn btn-primary" type="submit">Add Movie</button>
    </form>

    <div id="save" class="mt-3">Sending Data.....</div>
    <div id="success">Movie Added Successfully.....</div>
    
    <script>
        const details = document.getElementById("details")
        const save = document.getElementById("save")
        const success = document.getElementById("success")
        const apiUrl = 'https://va-5-assignment-express-student-neog.replit.app/movies'
        const titleI = document.getElementById("titleI")
        const yearI = document.getElementById("yearI")
        const genreI = document.getElementById("genreI")
        const directorI = document.getElementById("directorI")
        const actorI = document.getElementById("actorI")
        const langI = document.getElementById("langI")
        const countryI = document.getElementById("countryI")
        const ratingI = document.getElementById("ratingI")
        const plotI = document.getElementById("plotI")
        const awardsI = document.getElementById("awardsI")
        const pUrlI = document.getElementById("pUrlI")
        const TurlI = document.getElementById("TurlI")

        details.addEventListener("submit",function(event){
            event.preventDefault()
            save.style.display = "block"

            const data = {
                title:titleI.value,
                releaseYear:yearI.value,
                genre:genreI.value,
                director:directorI.value,
                actor:actorI.value,
                language:langI.value,
                country:countryI.value,
                rating:ratingI.value,
                plot:plotI.value,
                awards:awardsI.value,
                PosterUrl:pUrlI.value,
                TrailerUrl:TurlI.value
            }
            fetch(apiUrl,{
                method:"POST",
                body: JSON.stringify(data),
                headers:{
                    'Content-Type':'application/json'
                }
            }).then(function(response){
                return response.json()
            }).then(function(data){
                console.log(data)
                if(data)
                {
                    save.style.display = "None"
                    success.style.display = "block"
                }
            })
        })
    </script>
</body>
</html>